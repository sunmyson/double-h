import tkinter as tk
from tkinter import scrolledtext
from datetime import datetime

# 全局变量保存弹窗实例
popup_window = None
text_area = None

def show_text_window(file_path):
    global popup_window, text_area
    
    # 读取文件内容
    with open(file_path, "r", encoding="utf-8") as file:
        text_content = file.read()
    
    if popup_window is None or not popup_window.winfo_exists():
        # 弹窗不存在，新建窗口
        popup_window = tk.Tk()  # 主窗口直接作为弹窗
        popup_window.title("LLM Output")
        popup_window.geometry("600x400")
        
        # 创建带滚动条的文本框
        text_area = scrolledtext.ScrolledText(popup_window, wrap=tk.WORD)
        text_area.pack(expand=True, fill='both')
        
        # 插入文本并设置只读
        text_area.insert(tk.END, text_content + "\n\n")
        text_area.config(state='disabled')
        
        popup_window.mainloop()  # 运行窗口
    else:
        # 弹窗已存在，追加文本
        text_area.config(state='normal')
        text_area.insert(tk.END, f"--- {datetime.now().strftime('%Y-%m-%d %H:%M:%S')} ---\n")
        text_area.insert(tk.END, text_content + "\n\n")
        text_area.config(state='disabled')
        popup_window.lift()  # 置于最前

# 文件路径
file_path = r"D:\Desktop\hecthon\LLM.txt"  # 修改为你的实际路径

# 直接运行显示文本
show_text_window(file_path)
